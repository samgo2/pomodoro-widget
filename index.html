<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />

<meta
  name="viewport"
  content="width=520, height=260, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
/>

<title>Pomodoro Widget</title>

<style>
  html, body {
    width: 520px;
    height: 260px;
    margin: 0;
    padding: 0;
    overflow: hidden;
    user-select: none;
    -webkit-user-select: none;
    -ms-user-select: none;
    background: #0f1115;
    font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  }

  .card {
    width: 520px;
    height: 260px;
    position: fixed;
    inset: 0;
    border-radius: 18px;
    overflow: hidden;
    box-shadow: 0 30px 60px rgba(0,0,0,0.8);
  }

  .bg {
    position: absolute;
    inset: 0;
    background-image: url('https://i.pinimg.com/1200x/2d/da/48/2dda48be0dbd2cb168e95974a0d70e7e.jpg');
    background-size: cover;
    background-position: center;
    filter: brightness(0.6) saturate(1.05);
    transform: scale(1.05);
  }

  .overlay {
    position: absolute;
    inset: 0;
    background: linear-gradient(
      180deg,
      rgba(0,0,0,0.3),
      rgba(0,0,0,0.75)
    );
  }

  .content {
    position: relative;
    z-index: 1;
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    color: #f3f4f6;
  }

  .mode {
    font-size: 12px;
    letter-spacing: 2px;
    opacity: 0.75;
    margin-bottom: -10px;
  }

  .timer {
    font-size: 86px;
    font-weight: 900;
    margin-bottom: 28px;
    text-shadow: 0 4px 20px rgba(0,0,0,0.8);
  }

  .buttons {
    display: flex;
    gap: 10px;
  }

  button {
    border: none;
    border-radius: 999px;
    padding: 10px 20px;
    font-size: 13px;
    letter-spacing: 1px;
    cursor: pointer;
    color: #ffffff;
    background: rgba(255,255,255,0.14);
    backdrop-filter: blur(6px);
    transition: all 0.25s ease;
  }

  button:hover {
    background: rgba(255,255,255,0.22);
  }

  button:active {
    transform: scale(0.95);
  }
</style>
</head>

<body>

<div class="card">
  <div class="bg"></div>
  <div class="overlay"></div>

  <div class="content">
    <div class="mode" id="mode">WORK TIME</div>
    <div class="timer" id="timer">25:00</div>

    <div class="buttons">
      <button id="startBtn">START</button>
      <button id="pauseBtn">PAUSE</button>
      <button id="resetBtn">RESET</button>
    </div>
  </div>
</div>

<audio id="bgSound" loop>
  <source src="https://cdn.pixabay.com/audio/2022/10/30/audio_946b5b88b1.mp3" type="audio/mpeg">
</audio>

<script>
  const WORK_TIME = 25 * 60;
  const BREAK_TIME = 5 * 60;

  let timeLeft = WORK_TIME;
  let isRunning = false;
  let isWork = true;
  let interval;

  const timerEl = document.getElementById('timer');
  const modeEl = document.getElementById('mode');
  const sound = document.getElementById('bgSound');

  function updateDisplay() {
    const mins = String(Math.floor(timeLeft / 60)).padStart(2, '0');
    const secs = String(timeLeft % 60).padStart(2, '0');
    timerEl.textContent = `${mins}:${secs}`;
  }

  function startTimer() {
    if (isRunning) return;
    isRunning = true;
    sound.volume = 0.2;
    sound.play();

    interval = setInterval(() => {
      timeLeft--;
      updateDisplay();

      if (timeLeft <= 0) {
        clearInterval(interval);
        isRunning = false;
        isWork = !isWork;
        timeLeft = isWork ? WORK_TIME : BREAK_TIME;
        modeEl.textContent = isWork ? 'WORK TIME' : 'BREAK TIME';
        updateDisplay();
      }
    }, 1000);
  }

  function pauseTimer() {
    clearInterval(interval);
    isRunning = false;
    sound.pause();
  }

  function resetTimer() {
    clearInterval(interval);
    isRunning = false;
    isWork = true;
    timeLeft = WORK_TIME;
    modeEl.textContent = 'WORK TIME';
    updateDisplay();
    sound.pause();
    sound.currentTime = 0;
  }

  startBtn.onclick = startTimer;
  pauseBtn.onclick = pauseTimer;
  resetBtn.onclick = resetTimer;

  document.addEventListener('gesturestart', e => e.preventDefault());
  document.addEventListener('wheel', e => e.ctrlKey && e.preventDefault(), { passive: false });

  updateDisplay();
</script>

</body>
</html>
